
# 学习效果评估和巩固智能体系统 - 提示词文档

## 1. 系统概述
### 1.1 项目背景
在现代学习环境中，用户学习新知识后往往缺乏客观、有效的评估手段，导致无法及时发现知识盲点。这会影响学习效率和知识巩固。本系统旨在构建一个智能学习评估系统，通过AI技术实现基于学习资料的自动出题、判卷和个性化纠偏，形成一个闭环学习反馈机制。

### 1.2 核心目标
- 基于特定领域教材、PDF笔记或录音转写文本自动生成题目、评估答案并提供纠偏建议。
- 实现用户弱点记忆和个性化学习路径优化，确保学习效果得到巩固。

### 1.3 输入要求
- 支持多种格式输入：PDF笔记、文本文件（如录音转写）、教材扫描件等。
- 系统自动解析输入内容，提取核心知识点，形成知识库。

### 1.4 功能清单
- **动态出题**：根据资料自动生成选择题、简答题，确保覆盖核心考点，支持难度梯度调整（易/中/难）。
- **智能判卷**：分析用户输入答案，不仅给出对错判断，还提供详尽解析和建议。
- **弱点记忆**：自动收集用户高频错误，生成“错题本”，并支持计数、颜色变化可视化。
- **附加功能**：知识图谱可视化、历史对话压缩引用、领域特定指标评估。

### 1.5 考核指标
- 出题难度梯度是否合理：通过一套独立评价标准检测，确保题目从易到难覆盖知识点。
- 针对错题的“小灶”建议是否有针对性：基于用户历史错题，提供个性化复习路径和额外练习题。

### 1.6 系统亮点
- **对话压缩与引用机制**：当对话次数达到限制（如LLM上下文窗口上限）时，系统自动压缩前一轮对话成小段文本，作为知识库补充，用于新一轮对话，确保连续性。
- **知识图谱集成**：使用完善的数据集构建知识图谱，支持错题计数和可视化。
- **分布式云存储**：确保用户数据持久化和高可用性。

## 2. 系统架构
系统采用微服务架构，分为前端、后端、AI核心模块和数据存储层。整体部署在云原生环境中（如AWS、Azure或阿里云），支持分布式扩展。

### 2.1 整体架构图描述（用于生成时参考）
- **前端**：用户交互界面，使用React.js构建。
- **后端**：Node.js或Python Flask/Django，提供API接口。
- **AI核心**：集成LLM（如Grok、OpenAI GPT系列）和RAG（Retrieval-Augmented Generation）系统。
- **数据层**：MongoDB用于存储知识图谱和用户历史数据，Redis用于缓存用户状态和实时错题计数。
- **其他组件**：OpenCV用于判卷中的图像处理（如手写答案识别），Neo4j用于知识图谱存储。

### 2.2 技术栈
- **前端**：React.js, Ant Design（UI组件），D3.js（知识图谱可视化）。
- **后端**：Python (Flask/FastAPI)，支持异步处理。
- **AI/ML**：LangChain或LlamaIndex用于RAG实现，Hugging Face Transformers用于LLM微调，OpenCV for image processing。
- **数据库**：MongoDB (文档存储，用户历史错题)，Redis (键值存储，实时状态)，Neo4j (图数据库，知识图谱)。
- **云服务**：AWS S3 (分布式存储附件)，Kubernetes (容器化部署)，Lambda/Serverless (事件驱动处理)。
- **其他**：Prometheus提示词法（用于LLM判卷公平性），分布式消息队列如Kafka（用于异步任务）。

## 3. 核心组件实现细节
### 3.1 数据输入和处理
- **输入解析**：
  - 支持PDF、文本、录音转写（使用PyMuPDF解析PDF，NLTK/Spacy处理文本）。
  - 步骤：1. 用户上传文件。2. 使用OCR（如果PDF含图像）或直接提取文本。3. 构建知识库：使用RAG框架（如FAISS向量数据库）将文本向量化存储。
- **知识图谱构建**：
  - 使用完善的数据集（如Wikipedia dump或领域特定知识库，如Kaggle上的教育数据集）补充输入资料。
  - 工具：Neo4j构建图谱，节点表示知识点，边表示关系（e.g., “依赖于”）。
  - 集成错题计数：每个知识点节点添加属性“error_count”，初始为0。

### 3.2 动态出题模块
- **核心机制**：使用LLM结合RAG生成题目。
  - 步骤：1. 从知识库检索核心考点（使用语义搜索）。2. 引用历史错题数据：从MongoDB拉取用户错题，优先覆盖高频错误知识点。3. 生成题目：LLM提示词模板如“基于[知识点]生成[类型]题，难度[级别]，覆盖[考点]”。
  - 类型：选择题（单/多选）、简答题。
  - 难度梯度：易（基础定义）、中（应用）、难（综合推理）。
  - **难度评价标准**：使用另一个LLM实例评估题目（e.g., “评估此题难度：易/中/难，并检查覆盖率”）。
  - **亮点集成**：引用历史对话。通过压缩算法（e.g., 使用LLM总结前对话成100-200字文本），作为RAG知识库补充，用于新一轮出题。

### 3.3 智能判卷模块
- **核心机制**：LLM分析用户答案，结合Prometheus提示词法确保公平性。
  - 步骤：1. 用户输入答案（文本或图像）。2. 如果是图像：使用OpenCV进行边缘检测和OCR（e.g., Tesseract）转换为文本。3. 判卷：LLM提示“比较答案[用户输入]与标准[知识库]，给出对错、分数、详尽解析”。
  - 公平性提升：使用Agent策略，如多轮LLM投票（e.g., 3个LLM实例独立评分，取平均）。
  - 输出：对错、解析、建议（e.g., “此点错误源于[盲点]，建议复习[链接]”）。
  - **集成RAG**：检索知识图谱，确保解析引用准确来源。

### 3.4 弱点记忆和错题本
- **实现**：每次判卷后，更新知识图谱节点“error_count”+1。MongoDB存储错题记录，包括题目、用户答案、解析。
- **可视化**：前端显示计数颜色变化（e.g., error_count>5变红）。
- **交互**：点击知识点，显示详细解释（从知识库拉取）、AI出题（结合历史错题生成新题）。
- **个性化纠偏**：基于高频错误，生成“小灶”路径（e.g., “优先复习[知识点]，生成5道针对题”）。

### 3.5 用户状态管理和对话机制
- **存储**：Redis缓存实时状态，MongoDB持久化历史。
- **对话压缩**：当对话达到限制，系统自动总结（LLM提示“压缩对话为关键点摘要”）。新对话启动：将压缩文本注入RAG，作为上下文引用。
- **分布式存储**：使用云S3存储附件，确保跨地区高可用。

## 4. 前端界面设计
- **用户登录**：支持OAuth或JWT认证。
- **主界面**：
  - 模仿openWebUI的知识库部分和界面、原理设计，分为知识库区和问答区两个页面。
  - **左侧栏**：三个栏目 - AI判卷（上传答案，实时反馈）、历史错题（列表显示错题本，支持搜索和颜色编码）、知识图谱（自动呈现图谱可视化，D3.js渲染，节点点击展开解释和出题）。
  - **主区域**：上传资料、出题区、答题区。
- **代码题界面**：
  - 左侧为题目信息，右侧为答题区，下方为提示区，有运行按钮可以判断代码写的是否正确（参考附件图像：[Pasted image 20260118114417.png]）。
- **知识图谱界面**：
  - 知识图谱思维导图，每个知识点节点有错题数计数。
  - 点击错误知识点可以跳转到出题界面，根据错题出相关题。
- **选择题/简答题界面**：
  - 根据用户输入内容自动出题。
  - 错误要自动记入错题本，并在知识图谱中+1。
  - 每道题旁边有一个解答按钮，点击之后可以把题目和答案结果打包并跳转到问答区，并引用打包内容对答案结果进行分析解答。
- **响应式设计**：适配移动端，确保交互流畅。

## 5. 云原生部署、测试与评估
- **容器化**：Docker打包，Kubernetes orchestration。
- **持久化**：MongoDB/Redis集群。
- **可扩展性**：Serverless函数处理峰值负载。
- **监控**：Prometheus + Grafana。
- **测试**：单元测试（pytest）、集成测试、性能指标（出题时间<5s，判卷准确率>90%）。
- **安全**：数据加密、API鉴权。
- **风险与优化**：缓解LLM幻觉（RAG和多Agent），GDPR合规；未来添加语音输入。

## 6. 提示词模板
以下是核心提示词模板。您可以直接复制到AI模型中，替换[具体输出要求]为您的需求（如“生成React.js前端代码”或“输出完整Python后端API实现”）。模型将基于以上所有细节生成输出。

```
你是一个专业的软件开发者和AI系统设计师。基于以下详细系统文档，生成[具体输出要求]。确保输出严格遵守文档中的架构、技术栈、功能和界面设计。输出应结构化、完整、可执行（如果涉及代码），并包括必要的解释。

[将以上1-5节的所有内容完整复制插入这里，作为文档主体]

具体要求：
- 实现闭环学习反馈：从输入解析到出题、判卷、弱点记忆。
- 集成RAG和LLM，确保对话连续性和个性化。
- 前端使用React.js和D3.js，模仿openWebUI风格。
- 后端使用Python Flask/FastAPI。
- 数据库使用MongoDB、Redis、Neo4j。
- 处理附件图像描述：[Pasted image 20260118114417.png] 为代码题界面布局参考。
- 输出格式：如果代码，使用代码块；如果文档，使用Markdown。

生成输出：
```

## 7. 使用指南
- **步骤1**：复制提示词模板到AI模型（如Grok或ChatGPT）。
- **步骤2**：替换[具体输出要求]，例如：
  - “生成主界面的React.js代码，包括知识库区和问答区。”
  - “输出动态出题模块的Python代码，使用LangChain RAG。”
  - “生成完整知识图谱界面的D3.js可视化代码。”
- **步骤3**：运行提示，模型将直接生成所需内容。
- **注意**：如果输出不完整，可迭代提示（如“基于上轮输出，添加判卷模块”）。确保模型有足够上下文窗口处理整个文档。

